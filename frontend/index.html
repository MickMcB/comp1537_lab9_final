<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <!-- <form action="http://localhost:3000/getWeatherOfACityByName" method="get">
      <input type="text" value="Vancouver" name="cname" />
      <input type="submit" value="Submit!" />
    </form> -->

    <form action="http://localhost:3000/getWeatherOfACityByName" method="get">
        <input id="cityInput" type="text" value="Vancouver" name="cname" />
        <input type="submit" value="Submit!" />
    </form>

    <dic id="result"></dic>

    <script>
        myForm = document.querySelector("form");

        myForm.addEventListener("submit", (e) => {
            e.preventDefault();
            console.log(1111111111);

            // fetch AJAX
            fetch(
                `http://localhost:3000/getWeatherOfACityByName?cname=${cityInput.value}`
            )
                .then((resp) => resp.json())
                .then((data) => {
                    result.innerHTML += `<h1>${data.name}<h1>`;
                    result.innerHTML += `<div>${data.main.temp}</div>`;
                    result.innerHTML += `<div>${data.weather[0].description}</div>`;
                    result.innerHTML += `<div> <img src="https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png"> </div>`;
                });
        });
    </script>
</body>

</html>